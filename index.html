<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animácia teplôt na mape</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/leaflet-heatmap@0.2.0/leaflet-heat.js"></script>
</head>
<body style="margin: 0; height: 100vh;">
  <div id="map" style="width: 100%; height: 100%;"></div>

  <script>
    // Nastavenie mapy
    var map = L.map('map').setView([48.0, 19.0], 6); // Stred Slovenska

    // Pridanie základnej vrstvy mapy (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Príklad teplotných dát (časové body a teploty)
    var times = [
      "2025-01-19T21:00", "2025-01-19T22:00", "2025-01-19T23:00", "2025-01-20T00:00",
      "2025-01-20T01:00", "2025-01-20T02:00", "2025-01-20T03:00", "2025-01-20T04:00"
    ];
    var temperatures = [
      1.9, 1.1, 0.5, 0.3, 0.5, 0.2, 0.3, -0.1
    ];
    var locations = [
      [48.1, 19.3], [48.3, 19.5], [48.4, 19.6], [48.5, 19.7], 
      [48.6, 19.8], [48.7, 19.9], [48.8, 20.0], [48.9, 20.1]
    ];

    // Príprava heatmapy
    var heatData = [];
    for (var i = 0; i < times.length; i++) {
      for (var j = 0; j < locations.length; j++) {
        heatData.push([locations[j][0], locations[j][1], temperatures[i]]);
      }
    }

    // Pridanie heatmapy na mapu
    var heat = L.heatLayer(heatData, {
      radius: 25,
      blur: 15,
      maxZoom: 17
    }).addTo(map);

    // Animácia cez čas
    let currentIndex = 0;
    function animateHeatmap() {
      currentIndex = (currentIndex + 1) % times.length;
      heat.setLatLngs(heatData.filter((_, index) => index % times.length === currentIndex));
      setTimeout(animateHeatmap, 1000); // 1 sekunda na každú zmenu
    }
    animateHeatmap(); // Spustenie animácie
  </script>
</body>
</html>
